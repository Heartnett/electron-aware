var WebSocket=require("ws"),ref=require("events"),EventEmitter=ref.EventEmitter,Ultron=require("ultron"),events=new EventEmitter,ultron=new Ultron(events),Client=function(t){this.window=t,this.currentCommand=""};Client.prototype.log=function(t,e){this.window.executeJavaScript('console.info("[electron-live] - '+(e?"(ERROR) ":"")+t+'");')},Client.prototype.on=function(t,e){"object"==typeof t&&void 0===e?Object.keys(t).forEach(function(e){ultron.on(e,t[e])},this):"string"==typeof t&&"function"==typeof e&&ultron.on(t,e)},Client.prototype.send=function(t,e){if(!this.ws)throw"Call the start method first!";this.currentCommand=t,this.ws.send(t,e)},Client.prototype.start=function(t){var e=this;e.ws=new WebSocket("ws://localhost:8087"),e.ws.on("open",function(){e.log("connected!"),t&&t()}),e.ws.on("message",function(t){events.emit(t)})},module.exports=Client;